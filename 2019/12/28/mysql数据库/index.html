<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="mysql数据库, Hexo">
    <meta name="description" content="数据库1.树二叉树：二叉树是指每个结点最多有两个子树的树结构。
平衡二叉搜索树：它是一棵空树或它的左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树。2.索引的本质 索引是帮助mysql数据库快速获取数据排好顺序的而数">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>mysql数据库 | Hexo</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Hexo</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Hexo</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/18772847471" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/18772847471" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/19.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        mysql数据库
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                <span class="chip bg-color">数据库</span>
                            </a>
                        
                            <a href="/tags/mysql/">
                                <span class="chip bg-color">mysql</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/mysql/" class="post-category">
                                mysql
                            </a>
                        
                            <a href="/categories/mysql/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-category">
                                数据库
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2019-12-28
                </div>

                
                    
                    <div class="info-break-policy">
                        <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                        4.5k
                    </div>
                    

                    
                    <div class="info-break-policy">
                        <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                        16 分
                    </div>
                    
                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="1-树"><a href="#1-树" class="headerlink" title="1.树"></a>1.树</h3><pre><code>二叉树：二叉树是指每个结点最多有两个子树的树结构。
平衡二叉搜索树：它是一棵空树或它的左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树。</code></pre><h3 id="2-索引的本质"><a href="#2-索引的本质" class="headerlink" title="2.索引的本质"></a>2.索引的本质</h3><pre><code> 索引是帮助mysql数据库快速获取数据排好顺序的而数据结构。</code></pre><h3 id="3-mysql数据库中锁"><a href="#3-mysql数据库中锁" class="headerlink" title="3.mysql数据库中锁"></a>3.mysql数据库中锁</h3><pre><code>  悲观锁，假设丢失更新一定存在；sql后面加上for update；这是数据库的一种机制。

  乐观锁，假设丢失更新不一定发生。update时候存在版本，更新时候按版本号进行更新。

   表级锁：开销小，加锁块；不会出现死锁，锁定粒度大，发生锁冲突的概率最高，并发度最低。</code></pre><p>　　　　行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发性也最高。</p>
<p>　　　　页面锁：开销和加锁界于表锁和行锁之间，会出现死锁；锁定粒度界与表锁和行锁之间，并发一般。</p>
<pre><code>   共享锁：就是允许多个线程同时获取一个锁，一个锁可以同时被多个线程拥有。

   排它锁：也称作独占锁，一个锁在某一时刻只能被一个线程占有，其它线程必须等待锁被释放之后才可能获取到锁。</code></pre><h3 id="4-事务的四大特性（ACID）"><a href="#4-事务的四大特性（ACID）" class="headerlink" title="4.事务的四大特性（ACID）"></a>4.事务的四大特性（ACID）</h3><pre><code> 原子性（Atomicity）： 事务开始后所有操作，要么全部成功，要么全部失败，不可能停滞在中间环节。事务执行过程中出错，会回滚到事务开始前的状态，所有的操作就像 没  有发生一样。也就是说事务是一个不可分割的整体，就像化学中学过的原子，是物质构成的基本单位。
 一致性（Consistency）：一致性是指事务必须使数据库从一个一致性状态变换到另一个一致性状态，也就是说一个事务执行之前和执行之后都必须处于一致性状态。拿转账来说，假设用户A和用户B两者的钱加起来一共是5000，那么不管A和B之间如何转账，转几次账，事务结束后两个用户的钱相加起来应该还得是5000，这就是事务的一致性。
 隔离性（Isolation）:隔离性是当多个用户并发访问数据库时，比如操作同一张表时，数据库为每一个用户开启的事务，不能被其他事务的操作所干扰，多个并发事务之间要相互隔离。
  持久性（Durability）:持久性是指一个事务一旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。</code></pre><h3 id="5-事务的并发问题"><a href="#5-事务的并发问题" class="headerlink" title="5.事务的并发问题"></a>5.事务的并发问题</h3><pre><code>  脏读： 在一个事务处理过程里读取了另一个未提交的事务中的数据。
  不可重复读: 是指在一个事务内，多次读同一数据。在这个事务还没有结束时，另外一个事务也访问该同一数据。那么，在第一个事务中的两次读数据之间，由于第二个事务的修改，那么第一个事务两次读到的的数据可能是不一样的。这样就发生了在一个事务内两次读到的数据是不一样的，因此称为是不可重复读。
  幻读: 第一个事务对一个表中的数据进行了修改，这种修改涉及到表中的全部数据行。同时，第二个事务也修改这个表中的数据，这种修改是向表中插入或删除一行新数据。那么，以后就会发生操作第一个事务的用户发现表中还有没有修改的数据行，就好象发生了幻觉一样。</code></pre><h3 id="6-隔离级别及并发"><a href="#6-隔离级别及并发" class="headerlink" title="6.隔离级别及并发"></a>6.隔离级别及并发</h3><pre><code>         事务隔离级别           脏读       不可重复读    幻读
   读未提交（read-uncommitted）    是           是             是
   读已提交 （read-committed）    否        是            是
   可重复读（repeatable-read）    否        否            是
   串行化（serializable）          否        否            否

   MySQL默认的是 可重复读（repeatable-read），而其它的数据库默认的是 读已提交 （read-committed）</code></pre><h3 id="7-事务的七大传播机制"><a href="#7-事务的七大传播机制" class="headerlink" title="7.事务的七大传播机制"></a>7.事务的七大传播机制</h3><pre><code>               类型                          说明
    PROPAGATION_REQUIRED            如果当前没有事务，就新建一个事务，如果已经存在一个事务中，加入到这个事务中。这是最常见的选择。
    PROPAGATION_SUPPORTS            支持当前事务，如果当前没有事务，就以非事务方式执行。
    PROPAGATION_MANDATORY            使用当前的事务，如果当前没有事务，就抛出异常。
    PROPAGATION_REQUIRES_NEW        新建事务，如果当前存在事务，把当前事务挂起。
    PROPAGATION_NOT_SUPPORTED        以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。
    PROPAGATION_NEVER                以非事务方式执行，如果当前存在事务，则抛出异常。
    PROPAGATION_NESTED                如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则执行与PROPAGATION_REQUIRED类似的操作。

    注意：MySQL默认的是 PROPAGATION_REQUIRED</code></pre><h3 id="8-导致索引失效"><a href="#8-导致索引失效" class="headerlink" title="8.导致索引失效"></a>8.导致索引失效</h3><pre><code>    1.如果条件中有or，即使其中有条件带索引也不会使用(这也是为什么尽量少用or的原因)
    2.对于多列索引，不是使用的第一部分，则不会使用索引
    3.like查询是以%开头
    4.如果列类型是字符串，那一定要在条件中将数据使用引号引用起来,否则不使用索引
    5.如果mysql估计使用全表扫描要比使用索引快,则不使用索引</code></pre><h3 id="9-jdbc执行过程"><a href="#9-jdbc执行过程" class="headerlink" title="9.jdbc执行过程"></a>9.jdbc执行过程</h3><pre><code>    获得连接-》预编译sql-》设置参数-》执行</code></pre><h3 id="10-红黑树和B十树的区别"><a href="#10-红黑树和B十树的区别" class="headerlink" title="10.红黑树和B十树的区别"></a>10.红黑树和B十树的区别</h3><pre><code>结构：
  红黑树：红黑树是一种二叉搜索树，每个节点最多只能包含两个子节点。
  b树：B树是一种多路搜索树，它的每个节点可以包含多个键值和子节点。
效率不同：
  红黑树：对于查找较少数据的情况下，红黑树的常数操作次数更小，效率优于B树。
  b树：B树相比红黑树因为其每个节点可以存储多个键值，所以在查找大量数据时，B树的磁盘读取次数通常比红黑树要少。
策略不同：
  红黑树：红黑树属于内排序，内排序是被排序的数据元素全部存放在计算机内存中的排序算法。
  b树：b树属于外排序，外排序是指数据存放在外存中,数据排序时涉及内、外存数据交换的排序方法。
应用场景不同：
  红黑树：红黑树更适用于实现集合和映射等数据结构，以及其它查找频繁的场景。
  b树：B树更适用于实现数据库索引等需要频繁插入和删除操作的场景。
维护平衡性手段不同：
  红黑树：红黑树通过每个节点要么是红色要么是黑色，并且满足一定的红黑规则来保持平衡。
  b树：B树则是维护节点的高度平衡，通过节点的平衡因子来判断平衡状态。</code></pre><h3 id="11-MySQL-性能优化"><a href="#11-MySQL-性能优化" class="headerlink" title="11.MySQL 性能优化"></a>11.MySQL 性能优化</h3><p>  11.1 硬件优化<br>      11.1.1. 增加内存</p>
<pre><code>    SHOW VARIABLES LIKE &#39;innodb_buffer_pool_size&#39;;

    SET GLOBAL max_connections = 10000;
    SET GLOBAL innodb_buffer_pool_size = 23622320128;

    确保有足够的内存来缓存索引和数据，以减少磁盘I/O。
    设置innodb_buffer_pool_size，通常应设置为物理内存的70%-80%。
  11.1.2. 使用快速存储设备
    使用SSD代替HDD，以提高读取和写入速度。
    确保存储设备的I/O能力能够满足数据库的需求。</code></pre><p>  11.2配置优化<br>       11.2.1. MySQL配置<br>        调整innodb_buffer_pool_size，增加InnoDB缓冲池大小。<br>        设置query_cache_size和query_cache_type以利用查询缓存。<br>        配置thread_cache_size，减少线程创建和销毁的开销。<br>        调整table_open_cache和table_definition_cache以适应更多的表打开需求。<br>      11.2.2. 连接管理<br>        使用连接池（如HikariCP、C3P0）来管理数据库连接，减少连接创建和关闭的开销。<br> 11.3架构优化<br>      11.3.1. 数据库分片<br>        将数据库分片，将数据分布到多个服务器上，以减少单个服务器的负载。<br>      11.3.2. 主从复制<br>        使用主从复制（Master-Slave Replication）来分担读负载，提高读性能。<br>      11.3.3. 读写分离<br>        通过读写分离，将写操作发送到主库，读操作发送到从库，平衡负载。<br> 11.4查询优化<br>      11.4.1. 使用索引<br>        创建适当的索引来加速查询，特别是针对WHERE、JOIN、ORDER BY、GROUP BY等操作。<br>        使用覆盖索引（covering index），以减少回表操作。<br>        避免在索引列上使用函数和操作符，这会使索引失效。<br>      11.4.2. 优化查询语句<br>        避免使用SELECT *，只查询需要的列。<br>        使用EXPLAIN分析查询计划，优化查询路径。<br>        避免子查询（Subquery），尽量使用JOIN替代。<br>        使用批量插入（Batch Insert）和更新，以减少单次操作的开销。<br>      11.4.3. 拆分复杂查询<br>        将复杂查询拆分为多个简单查询，减少锁定时间和资源消耗。<br> 11.5索引优化<br>      11.5.1. 合理使用索引<br>        对频繁查询的列创建索引，如主键、外键、JOIN列和过滤条件列。<br>        避免过多索引，因为索引也会占用存储空间和影响写性能。<br>      11.5.2. 定期维护索引<br>        使用ANALYZE TABLE和OPTIMIZE TABLE定期维护表和索引，确保索引统计信息的准确性。</p>
<p>  11.6表设计优化<br>      11.6.1. 正规化与反规范化<br>        根据实际情况进行表的正规化和反规范化，平衡存储和查询性能。<br>      11.6.2. 数据类型选择<br>        使用合适的数据类型，尽量使用定长数据类型，以节省存储空间和提高查询速度。<br>        避免使用TEXT和BLOB类型，尽量使用VARCHAR或其他更小的数据类型。<br>      11.6.3. 分区表<br>        对大表进行分区（Partitioning），提高查询性能和管理效率。</p>
<p>  11.7缓存优化<br>      11.7.1. 查询缓存<br>        使用MySQL的查询缓存（Query Cache）来缓存查询结果，提高相同查询的响应速度。<br>      11.7.2. 应用级缓存<br>        在应用层使用缓存（如Redis、Memcached）来缓存频繁访问的数据，减轻数据库负载。</p>
<p>  11.8监控与调优<br>     11.8.1. 监控工具<br>        使用监控工具（如Percona Monitoring and Management、New Relic、Zabbix）来监控数据库性能，发现瓶颈。<br>     11.8.2. 定期调优<br>        定期检查和优化数据库配置、查询和索引，确保数据库保持最佳性能。</p>
<h3 id="12-MySQL-命令行登录"><a href="#12-MySQL-命令行登录" class="headerlink" title="12.MySQL 命令行登录"></a>12.MySQL 命令行登录</h3><pre><code>mysql -h 127.0.0.1 -P 3306 -u root -p</code></pre><h3 id="13-MySQL-查看当前进程"><a href="#13-MySQL-查看当前进程" class="headerlink" title="13.MySQL 查看当前进程"></a>13.MySQL 查看当前进程</h3><pre><code>SELECT * FROM INFORMATION_SCHEMA.PROCESSLIST;

查询出来的结果都是什么意思。
    Id: 就是这个线程的唯一标识，当我们发现这个线程有问题的时候，可以通过 kill 命令，加上这个Id值将这个线程杀掉。前面我们说了show processlist 显示的信息时来自information_schema.processlist 表，所以这个Id就是这个表的主键。
    User: 就是指启动这个线程的用户。
    Host: 记录了发送请求的客户端的 IP 和 端口号。通过这些信息在排查问题的时候，我们可以定位到是哪个客户端的哪个进程发送的请求。
    DB: 当前执行的命令是在哪一个数据库上。如果没有指定数据库，则该值为 NULL 。
    Command: 是指此刻该线程正在执行的命令。这个很复杂，下面单独解释
    Time: 表示该线程处于当前状态的时间。
    State: 线程的状态，和 Command 对应，下面单独解释。
    Info: 一般记录的是线程执行的语句。默认只显示前100个字符，也就是你看到的语句可能是截断了的，要看全部信息，需要使用 show full processlist。

Command 的值：
    Binlog Dump: 主节点正在将二进制日志 ，同步到从节点
    Change User: 正在执行一个 change-user 的操作
    Close Stmt: 正在关闭一个Prepared Statement 对象
    Connect: 一个从节点连上了主节点
    Connect Out: 一个从节点正在连主节点
    Create DB: 正在执行一个create-database 的操作
    Daemon: 服务器内部线程，而不是来自客户端的链接
    Debug: 线程正在生成调试信息
    Delayed Insert: 该线程是一个延迟插入的处理程序
    Drop DB: 正在执行一个 drop-database 的操作
    Execute: 正在执行一个 Prepared Statement
    Fetch: 正在从Prepared Statement 中获取执行结果
    Field List: 正在获取表的列信息
    Init DB: 该线程正在选取一个默认的数据库
    Kill : 正在执行 kill 语句，杀死指定线程
    Long Data: 正在从Prepared Statement 中检索 long data
    Ping: 正在处理 server-ping 的请求
    Prepare: 该线程正在准备一个 Prepared Statement
    ProcessList: 该线程正在生成服务器线程相关信息
    Query: 该线程正在执行一个语句
    Quit: 该线程正在退出
    Refresh：该线程正在刷表，日志或缓存；或者在重置状态变量，或者在复制服务器信息
    Register Slave： 正在注册从节点
    Reset Stmt: 正在重置 prepared statement
    Set Option: 正在设置或重置客户端的 statement-execution 选项
    Shutdown: 正在关闭服务器
    Sleep: 正在等待客户端向它发送执行语句
    Statistics: 该线程正在生成 server-status 信息
    Table Dump: 正在发送表的内容到从服务器
    Time: Unused</code></pre><h3 id="14-mysql-三大日志"><a href="#14-mysql-三大日志" class="headerlink" title="14.mysql 三大日志"></a>14.mysql 三大日志</h3><pre><code>    MySQL三大日志分别是：重做日志（redo log）、回滚日志（undo log）和二进制日志（binlog）。

    重做日志（redo log）：确保事务的持久性。MySQL在事务提交后，会将提交的事务写入重做日志中，之后再更新磁盘上的数据页。

    回滚日志（undo log）：保证事务的原子性和隔离性。当事务对数据库进行修改时，Undo Log会记录旧的数据的版本，以便在事务失败时回滚到修改前的状态，或者在事务回滚时回滚到回滚点。

    二进制日志（binlog）：支持数据的复制和恢复。MySQL的二进制日志（binary log）记录了所有的DDL和DML语句，用于复制功能，也可以用于数据恢复。

    实例代码：

    重做日志和回滚日志通常是在存储引擎层由各个存储引擎如InnoDB自行管理和使用的，而二进制日志则通过MySQL服务器层的日志管理工具来管理和使用

    开启二进制日志：
    SET sql_log_bin = 1; -- 开启
    SET sql_log_bin = 0; -- 关闭

    查看二进制日志事件：
    SHOW BINARY LOGS; -- 查看二进制日志列表
    SHOW BINLOG EVENTS IN &#39;mysql-bin.000001&#39;; -- 查看指定二进制日志的事件

    配置二进制日志：
    [mysqld]
    log_bin = /var/log/mysql/mysql-bin.log
    expire_logs_days = 7
    max_binlog_size = 100M

    查看正在写入的二进制日志：
    SHOW MASTER STATUS;

    注意：重做日志和回滚日志是InnoDB存储引擎特有的日志，而二进制日志则是MySQL服务器层面的日志，不同的存储引擎可能不一样。</code></pre><h3 id="15-MySQL索引类型"><a href="#15-MySQL索引类型" class="headerlink" title="15.MySQL索引类型"></a>15.MySQL索引类型</h3><pre><code>    1.普通索引
        是最基本的索引，它没有任何限制。仅加速查询
    2.唯一索引
        索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。加速查询 + 列值唯一（可以有null）
    3.主键索引
         是一种特殊的唯一索引，一个表只能有一个主键，不允许有空值。一般是在建表的时候同时创建主键索引。加速查询 + 列值唯一（不可以有null）+ 表中只有一个。
    4.组合索引
          指多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。使用组合索引时遵循最左前缀集合，多列值组成一个索引，专门用于组合搜索，其效率大于索引合并
    5.全文索引
          对文本的内容进行分词，进行搜索，</code></pre><h3 id="16-MySQL回表"><a href="#16-MySQL回表" class="headerlink" title="16.MySQL回表"></a>16.MySQL回表</h3><pre><code>指的是在进行索引查询时，首先通过索引定位到对应页，然后再根据行的物理地址找到所需的数据行。换句话说，回表是指根据索引查询到的主键值再去访问主键索引，从而获取完整的数据记录。</code></pre><h3 id="17-sql执行过程"><a href="#17-sql执行过程" class="headerlink" title="17.sql执行过程"></a>17.sql执行过程</h3><p><img src="/image/sql%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png" alt="效果图预览"><br>    undo log（回滚日志）：是 Innodb 存储引擎层生成的日志，实现了事务中的原子性，主要用于事务回滚和 MVCC。<br>    redo log（重做日志）：是 Innodb 存储引擎层生成的日志，实现了事务中的持久性，主要用于掉电等故障恢复；<br>    binlog （归档日志）：是 Server 层生成的日志，主要用于数据备份和主从复制；</p>
<h3 id="18-mysql中关键字执行顺序"><a href="#18-mysql中关键字执行顺序" class="headerlink" title="18.mysql中关键字执行顺序"></a>18.mysql中关键字执行顺序</h3><pre><code>MySQL的SQL查询语句的关键词执行顺序大致如下：

    (SELECT DISTINCT ...)

    FROM ...

    JOIN ...

    ON ...

    WHERE ...

    GROUP BY ...

    HAVING ...

    ORDER BY ...

    LIMIT ...

    具体的执行流程如下：

    FROM：确定数据来源，将数据载入内存。

    ON：执行JOIN条件，基于JOIN语句来关联两个表。

    JOIN：如果有JOIN语句，将关联的表进行合并。

    WHERE：过滤记录，删除不需要的数据。

    GROUP BY：按指定的列分组数据。

    HAVING：过滤分组，删除不需要的分组。

    SELECT：选取特定的列。

    DISTINCT：去除重复数据。

    ORDER BY：按指定列排序最终结果。

    LIMIT：限制输出的数量。</code></pre>
            </div>
            <hr/>
            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                    <span class="chip bg-color">数据库</span>
                                </a>
                            
                                <a href="/tags/mysql/">
                                    <span class="chip bg-color">mysql</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/01/08/Jenkins/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="Jenkins">
                        
                        <span class="card-title">Jenkins</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
Jenkins是什么Jenkins 是一款流行的开源持续集成（Continuous Integration）工具，广泛用于项目开发，具有自动化构建、测试和部署等功能。官网： http://jenkins-ci.org/。

Jenkins
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-01-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Jenkins/" class="post-category">
                                    Jenkins
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Jenkins/">
                        <span class="chip bg-color">Jenkins</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2019/12/21/rabbitMq/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="rabbitMq">
                        
                        <span class="card-title">rabbitMq</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
消息中间件
1、六种工作模式 简单模式：一个生产者，一个消费者  
      1.消息产生着§将消息放入队列
      2.消息的消费者(consumer) 监听(while) 消息队列,如果队列中有消息,就消费掉,消息被拿走后,自动
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2019-12-21
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/rabbitMq/" class="post-category">
                                    rabbitMq
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/rabbitMq/">
                        <span class="chip bg-color">rabbitMq</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

    
<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>



    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">年份</span>
            <a href="https://github.com/18772847471/18772847471.github.io" target="_blank">boyup</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">111k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/18772847471" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1104583639@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1104583639" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1104583639" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>









    <a href="/medias/reward/weixin.jpg" class="tooltipped" target="_blank" data-tooltip="加我微信" data-position="top" data-delay="50">
        <i class="fab fa-weixin"></i>
    </a>


</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->


    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    
    <script>
        (function (i, s, o, g, r, a, m) {
            i["DaoVoiceObject"] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            a.charset = "utf-8";
            m.parentNode.insertBefore(a, m)
        })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
            "//widget.daovoice.io/widget/6984b559.js", "daovoice")
        daovoice('init', {
            app_id: ""
        });
        daovoice('update');
    </script>
    

    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
